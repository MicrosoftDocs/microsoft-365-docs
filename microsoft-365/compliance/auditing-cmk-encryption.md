---
title: "Use customer-managed keys to encrypt your organization's auditing data"
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
audience: Admin
ms.topic: article
ms.service: O365-seccomp
ms.localizationpriority: medium
ms.collection:
- m365-security-compliance
search.appverid:
- MOE150
- MET150
description: "Learn how to use customer-managed keys to encrypt your organization's audit records." 
---

# Use Customer Key to encrypt audit records

You can now enable Microsoft Purview Customer Key encryption for audit records. Auditing builds on the [Service encryption with Microsoft Purview Customer Key](customer-key-overview.md) to encrypt your organization's auditing data. Implementing Customer Key provides extra protection by preventing unauthorized systems or Microsoft data center personnel from viewing your auditing data in the auditing pipeline and at rest. Using Customer Key to encrypt your auditing data also helps you meet regulatory or compliance obligations because your organization provides and controls the encryption keys.

Customer Key requires a Microsoft 365 E5 subscription. For more information, see [Microsoft 365 guidance for security & compliance](/office365/servicedescriptions/microsoft-365-service-descriptions/microsoft-365-tenantlevel-services-licensing-guidance/microsoft-365-security-compliance-licensing-guidance#information-protection-customer-key-for-microsoft-365).

Even if you don't use Customer Key to encrypt your audit records, data at rest in Microsoft 365 is encrypted by default.

## Implement Customer Key for auditing

To implement Customer Key for auditing, you have to create a multi-workload Data Encryption Policy (DEP), which defines the encryption hierarchy. This hierarchy is used by the service to encrypt your auditing data using the two root keys you manage and the availability key that's autogenerated and protected by Microsoft.

For detailed step-by-step instructions, see [Set up Customer Key](customer-key-set-up.md).

After you complete the setup, Microsoft 365 encrypts all data in your organization, including audit records, using the keys that are identified in the multi-workload DEP that you created.

## Offboarding from Customer Key

If you decide not to use Customer Key for assigning multi-workload DEPs anymore, you'll need to reach out to Microsoft support with a request to “offboard” from Customer Key. Ask the support team to file a service request against Microsoft Purview Customer Key team. Reach out to m365-ck@service.microsoft.com if you have any questions. See [Roll back from Customer Key to Microsoft managed Keys](customer-key-manage.md#roll-back-from-customer-key-to-microsoft-managed-keys) for more information.

Customers may no longer want to manage their own keys and may opt to offboard from CMK.
For Auditing - we have NOT ONBOARDED to MMK. So once the tenant offboards from CMK there will be NO fallback to second level of encryption. The data will be encrypted at rest by the default Azure storage encryption.

<!--
Steps: 

- Customer reaches out to MDEPS team to offboard from CMK.

- MDEPS team offboards the customer and marks their DEPs as disabled -

- New data for the customer / tenant will not be encrypted

- Existing / Older encrypted data will be decrypted using the keys associated with the DEP

NOTE: Even after offboarding, tenant is expected to keep their pre-used encryption keys and keep the MDEPS AAD app access to the AKVs till the lifetime of their encrypted data.
-->

## Offboarding from Microsoft 365

Purging a multi-workload DEP is not supported for Microsoft Purview Customer Key. The multi-workload DEP is used to encrypt data across multiple workloads across all tenant users. Purging a multi-workload DEP would result in data from across multiple workloads becoming inaccessible. If you decide to exit Microsoft Purview services altogether, then you could pursue the path of tenant deletion per the [documented process](/azure/active-directory/enterprise-users/directory-delete-howto). See how to delete a tenant in Azure Active Directory."

<!--
- Customer in this case wants to leave the M365 eco-system and ensure all their data is purged / deleted.
- In case of "multi-workload" DEP - purging or deleting the DEP is NOT allowed by policy.
- In this case the customer would revoke access to the AKV containing the CMK keys.
The customer would proceed with the Tenant Deprovisioning process in order to fully leave the service. They may revoke keys, but not required by the process.
- This change would be reflected in ~24 hours across ALE and MDEPS after caches have expired.
- Ideally since customer is exiting the eco-system, no more audit events would be generated for the customer. However in case there are new audit events for the customer, then they will NOT be encrypted using CMK as customer has offboarded / revoked key access.
-->

## More information

- It takes up to 24 hours after you complete the implementation steps to encrypt your organization's auditing records.
- If your organization already has MDEPS support for other workloads (e.g. Exchange or SharePoint), you only have to enable it for multiple workloads.
- Only audit records that are generated after Customer Key for auditing is implemented (or if your organization implemented Customer Key for multiple workloads) will be encrypted. Existing audit records aren't encrypted.
